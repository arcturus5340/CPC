{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../static/@chrisoakman/chessboardjs/dist/chessboard-1.0.0.css"/>
</head>
<body>
    <script src="{% static "jquery/dist/jquery.js" %}"></script>
    <script src="{% static "chess.js/chess.js" %}"></script>
    <script src="{% static "@chrisoakman/chessboardjs/dist/chessboard-1.0.0.js" %}"></script>
    <div id="myBoard" style="width: 400px"></div>

    <script>
        var board = null;

        config = {
            position: 'start',
        };

        setTimeout(function() {
            board = Chessboard('myBoard', config);
        }, 0);


        function makeRandomMove(){
            $.ajax({
                url: '/make_random_move/',
                type: 'post',
                data: {
                    csrfmiddlewaretoken: '{{ csrf_token }}',
                },
                success: function(response){
                    board.position(response['FEN']);
                },
                error: function(){
                    // TODO: handle the error of sending the ajax-request
                },
            });
            window.setTimeout(makeRandomMove, 500);
        }

        window.setTimeout(makeRandomMove, 500);
    </script>
</body>
</html>